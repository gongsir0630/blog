
<!DOCTYPE html>
<html lang="zh-CN">
    <!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  
    <link rel="icon" href="https://thirdqq.qlogo.cn/qqapp/1110061270/E0B4163FDCD19C3791B49B64EDB9F688/100">
  
  
      <meta name="author" content="ç¨‹åºå‘˜Kyleâœ¨">
  
  
      <meta name="subtitle" content="ç¨‹åºå‘˜Kyleâœ¨çš„ä¸ªäººåšå®¢">
  
  
      <meta name="description" content="ç¨‹åºå‘˜Kyleâœ¨çš„ä¸ªäººåšå®¢,è®°å½•éšç¬”ä¸å­¦ä¹ ç¬”è®°ï¼ŒJavaåç«¯ç›¸å…³çš„çŸ¥è¯†ï¼Œä¸ªäººé¢ç»ç­‰">
  
  
      <meta name="keywords" content=",ç¨‹åºå‘˜Kyleâœ¨">
  
  
    <link rel="alternate" href="/blog/atom.xml " title="ç¨‹åºå‘˜Kyleâœ¨ï½œä¸ªäººåšå®¢" type="application/atom+xml">
  

  

  <title>ä½¿ç”¨ Travis æ‰“é€  SpringBoot åº”ç”¨æŒç»­é›†æˆå’Œè‡ªåŠ¨éƒ¨ç½² | Travis CI åˆä½“éªŒ | ç¨‹åºå‘˜Kyleâœ¨ï½œä¸ªäººåšå®¢</title>

  

  

  
      
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>


  

  <link rel="stylesheet" href="/blog/css/style.css" >
  <link rel="stylesheet" href="/blog/css/partial/dark.css" >

  
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&amp;display=swap"  media="print" onload="this.media='all'">
  
  
  

  
    
      <link rel="stylesheet" href="/blog/css/partial/highlight/atom-one-light.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/a2396837/CDN@latest/css/iconfont.css">
    
  

  
    <script src="/blog/js/todark.js"></script>
    
<meta name="generator" content="Hexo 5.2.0"></head>
</html>
    
<div class="nav index" style="height: 60px;">
    <div class="title animated fadeInDown">
        <div class="layui-container">
                <div class="nav-title"><a href="/blog/" title="ç¨‹åºå‘˜Kyleâœ¨ï½œä¸ªäººåšå®¢">ç¨‹åºå‘˜Kyleâœ¨ï½œä¸ªäººåšå®¢</a></div>
            <div class="nav-list">
                <button> <span class=""></span><span style="display: block;"></span><span class=""></span> </button>
                <ul class="layui-nav" lay-filter="">
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/search/ ">
                            <i class=" fas fa-search-plus " style="color: rgb(3 169 244);"></i>
                            <span class="layui-nav-item-name">æœç´¢</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/ ">
                            <i class=" fab fa-fort-awesome " style="color: rgb(255 107 107);"></i>
                            <span class="layui-nav-item-name">é¦–é¡µ</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/archives/ ">
                            <i class=" fas fa-archive " style="color: rgb(10 189 227);"></i>
                            <span class="layui-nav-item-name">æ—¶é—´çº¿</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/tags/ ">
                            <i class=" fas fa-hashtag " style="color: rgb(254 202 87);"></i>
                            <span class="layui-nav-item-name">æ ‡ç­¾</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/categories ">
                            <i class=" far fa-folder-open " style="color: rgb(29 209 161);"></i>
                            <span class="layui-nav-item-name">åˆ†ç±»</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/about/ ">
                            <i class=" fab fa-grav " style="color: rgb(154 106 247);"></i>
                            <span class="layui-nav-item-name">å…³äº</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/guestbook/ ">
                            <i class=" fab fa-telegram " style="color: hsl(205deg 100% 50%);"></i>
                            <span class="layui-nav-item-name">ç•™è¨€</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/link/ ">
                            <i class=" fab fa-weixin " style="color: hsl(152deg 73% 45%);"></i>
                            <span class="layui-nav-item-name">å‹é“¾</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blog/shuoshuo/ ">
                            <i class=" fas fa-coffee " style="color:#31c7c1;"></i>
                            <span class="layui-nav-item-name">è¯´è¯´</span>
                        </a>
                    </li>
                    
                    
                        <li class="layui-nav-item" id="btn-toggle-dark">ğŸŒ™</li>
                    
                    <span class="layui-nav-bar" style="left: 342px; top: 78px; width: 0px; opacity: 0;"></span>
                </ul>
            </div>
        </div>
    </div>
</div>
    
<header class="header">
        
            <div class="logo">
                    <a href="/blog/"><img src="https://thirdqq.qlogo.cn/qqapp/1110061270/E0B4163FDCD19C3791B49B64EDB9F688/100" onerror=this.onerror=null,this.src="/blog/img/loading.gif"></a>
            </div>
         
    </div>
     

            <div class="motto">
                <span>ç”¨æˆ‘çš„æŒ‡å°–å®ç°æˆ‘çš„æŠ€æœ¯æ¢¦</span>
            </div>
    
    
            <div class="social">
                
                        <a class="social-icon" href="https://github.com/gongsir0630" target="_blank" title="Github">
                            <i class="iconfont icon-GitHub" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="mailto:gongsir0630@gmail.com" target="_blank" title="Email">
                            <i class="iconfont icon-email" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="https://space.bilibili.com/277602309" target="_blank" title="Bilibili">
                            <i class="iconfont icon-bilibili" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="/atom.xml" target="_blank" title="rss">
                            <i class="iconfont icon-rss" aria-hidden="true"></i>
                          </a>
                 
            </div>
     
</header>

    
<article id="post">
  <div class="post-title">ä½¿ç”¨ Travis æ‰“é€  SpringBoot åº”ç”¨æŒç»­é›†æˆå’Œè‡ªåŠ¨éƒ¨ç½² | Travis CI åˆä½“éªŒ</div>
  
<div class="post-meta">
    
    
      <div class="post-meta-item date">
        <span title="å‘è¡¨äº 2021.04.02"><i class="far fa-calendar-alt"></i> 2021.04.02</span>
      </div>
      <div class="post-meta-item updated">
        <span title="æ›´æ–°äº 2023.07.30"><i class="far fa-calendar-check"></i> 2023.07.30</span>
      </div>
     
    
      <div class="post-meta-item categories">
        
          <i class="fas fa-inbox article-meta__icon"></i> <a href="/blog/categories/%E5%8E%9F%E5%88%9B/">åŸåˆ›</a>
        
          <i class="fas fa-inbox article-meta__icon"></i> <a href="/blog/categories/%E5%8E%9F%E5%88%9B/%E5%90%8E%E7%AB%AF/">åç«¯</a>
        
      </div>
     
    
     <div class="post-meta-item wordcount">
        
          <i class="fas fa-pencil-alt"></i> <span class="post-count">2.3k å­—</span>
           
        
          <i class="far fa-clock"></i> <span class="post-count">9 åˆ†é’Ÿ</span>
                               
      </div>
     
</div>


  
    <div id="toc" class="toc">
          <h1>ç›®å½•</h1>
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90"><span class="toc-number">2.</span> <span class="toc-text">æŒç»­é›†æˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E6%96%87%E5%BC%80%E5%A7%8B"><span class="toc-number">3.</span> <span class="toc-text">æ­£æ–‡å¼€å§‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82"><span class="toc-number">3.1.</span> <span class="toc-text">éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GitHub-%E6%8E%88%E6%9D%83"><span class="toc-number">3.2.</span> <span class="toc-text">GitHub æˆæƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E9%A1%B9%E7%9B%AE%E7%9B%91%E6%8E%A7"><span class="toc-number">3.3.</span> <span class="toc-text">å¼€å¯é¡¹ç›®ç›‘æ§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#travis-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">travis é…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-ssh-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><span class="toc-number">3.4.1.</span> <span class="toc-text">é…ç½® ssh å…å¯†ç™»å½•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%8A%A0%E5%AF%86"><span class="toc-number">3.4.2.</span> <span class="toc-text">æ–‡ä»¶åŠ å¯†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85"><span class="toc-number">3.4.3.</span> <span class="toc-text">é¡¹ç›®æ‰“åŒ…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E9%83%A8%E7%BD%B2"><span class="toc-number">3.4.4.</span> <span class="toc-text">ä¸Šä¼ éƒ¨ç½²</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5"><span class="toc-number">3.4.5.</span> <span class="toc-text">é‚®ä»¶é€šçŸ¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">3.5.</span> <span class="toc-text">æµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-amp-%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5"><span class="toc-number">4.</span> <span class="toc-text">æ€»ç»“ &amp; ç›¸å…³é“¾æ¥</span></a></li></ol>
      </div>
    
  <div class="content">
        <div><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘ä¸€ç›´åœ¨å†™æ¯•è®¾é¡¹ç›®ï¼ˆ<a target="_blank" rel="noopener" href="https://github.com/gongsir0630/campus-recruitment-guidance">æŸšå­å¸®æ ¡æ‹›æŒ‡å¯¼æœåŠ¡å¹³å°</a>ï¼‰ï¼Œé¡ºä¾¿æ•´ç†äº†ä¸€ä¸‹è‡ªå·± <a target="_blank" rel="noopener" href="https://github.com/gongsir0630">GitHub</a> ä¸Šçš„é¡¹ç›®ï¼š</p>
<p><img src= "/blog/img/loading.gif" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f3066c64416408db5d7a593fc125062~tplv-k3u1fbpfcp-watermark.image" alt="My GitHub HomePage"></p>
<p>å¤§å­¦è¿™å‡ å¹´ï¼Œè¿˜æ˜¯å†™äº†ä¸€äº›èƒ½ä¸Šç®€å†çš„é¡¹ç›®ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®éƒ½æ˜¯ <code>Pm-&gt;Dev-&gt;Op</code> è¿›è¡Œè§’è‰²æ‰®æ¼”ï¼Œç‰¹åˆ«æ˜¯ä»å¼€å‘åˆ°è¿ç»´éƒ¨ç½²è¿™ä¸€é˜¶æ®µï¼Œ ä»¥å‰æ¯æ¬¡çš„ç‰ˆæœ¬è¿­ä»£éƒ½è¦é‡å¤ä¸‹é¢çš„æµç¨‹ï¼š</p>
<ul>
<li>git add &amp;&amp; git commit &amp;&amp; git push -&gt; â‘ ä»£ç çš„è¿­ä»£</li>
<li>mvn clean package -&gt; â‘¡é¡¹ç›®æ‰“åŒ…</li>
<li>scp -r target/xxx.jar user@host:/dir/xxx.jar -&gt; â‘¢ä¸Šä¼ åº”ç”¨åˆ°æœåŠ¡å™¨</li>
<li>ssh user@host -&gt; â‘£ç™»å½•æœåŠ¡å™¨</li>
<li>sh restart.sh -&gt; â‘¤æ‰§è¡Œéƒ¨ç½²è„šæœ¬</li>
<li>å‘ç°bug -&gt; ä¿®æ”¹ä»£ç  -&gt; goto â‘ </li>
</ul>
<p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼ç»å†ï¼Œä¸€å®šä¼šæ·±æ„Ÿ<strong>æŒç»­é›†æˆ</strong>çš„å¿…è¦æ€§ï¼Œå› ä¸ºæ‰‹åŠ¨éƒ¨ç½²å®åœ¨åˆç¹çåˆè€—æ—¶ï¼Œè™½ç„¶éƒ¨ç½²æµç¨‹åŸºæœ¬å›ºå®šï¼Œä¾ç„¶è¿˜æ˜¯å®¹æ˜“å‡ºé”™ã€‚</p>
<h2 id="æŒç»­é›†æˆ"><a href="#æŒç»­é›†æˆ" class="headerlink" title="æŒç»­é›†æˆ"></a>æŒç»­é›†æˆ</h2><p>å¦‚æœä½ å¾ˆç†Ÿæ‚‰<strong>æŒç»­é›†æˆ</strong>ï¼Œä¸€å®šä¼šåŒæ„è¿™æ ·çš„è§‚ç‚¹ï¼šã€Œä½¿ç”¨å®ƒå·²ç»æˆä¸ºä¸€ç§æ ‡é…ã€ã€‚</p>
<p>å¦‚æœä½ è¿˜ä¸äº†è§£<strong>æŒç»­é›†æˆ</strong>ï¼Œè¿™é‡Œå¯ä»¥<a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2015/09/continuous-integration.html">å¿«é€Ÿå…¥é—¨</a>ã€‚</p>
<p>å¸‚åœºä¸ŠæŒç»­é›†æˆå·¥å…·ä¼—å¤š(Jenkinsã€Travis CIã€Gitlab CI)ï¼Œä¹Ÿæœ‰å¾ˆå¤šäº‘å¹³å°é›†æˆäº† CI/CID æœåŠ¡ï¼ˆCodingã€é˜¿é‡Œäº‘æ•ˆç­‰ï¼‰ã€‚</p>
<p>ä¹‹å‰æˆ‘ä½“éªŒè¿‡ <a target="_blank" rel="noopener" href="https://e.coding.net/">Coding</a> å¹³å°çš„æŒç»­é›†æˆ-æ„å»ºè®¡åˆ’ï¼Œç”¨äºéƒ¨ç½²æˆ‘è‡ªå·±çš„åšå®¢ï¼Œç›¸å…³æ–‡ç« å’Œæ•™ç¨‹ä¹Ÿå‘å¸ƒåœ¨è‡ªå·±çš„åšå®¢ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹å‡»<a target="_blank" rel="noopener" href="https://blog.gongsir.club/">ä¼ é€é—¨</a>å­¦ä¹ ã€‚</p>
<p>æœ€è¿‘æ•´ç† Github é¡¹ç›®ï¼Œå°±æƒ³ç€ä½“éªŒä¸€ä¸‹ä½¿ç”¨ Travis CI æ¥å®ç°é¡¹ç›®çš„ CIï¼ŒæŠ˜è…¾äº†ä¸€å¤©ï¼Œæ— å¥ˆå›½å†… Travis æ–‡æ¡£ç¨€ç¼ºï¼Œè¸©äº†å¾ˆå¤šå‘ï¼Œæ‰€ä»¥æ‰æ¥å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å’ŒåŒå­¦ä»¬ç›¸äº’åˆ†äº«ã€å­¦ä¹ ï¼</p>
<h2 id="æ­£æ–‡å¼€å§‹"><a href="#æ­£æ–‡å¼€å§‹" class="headerlink" title="æ­£æ–‡å¼€å§‹"></a>æ­£æ–‡å¼€å§‹</h2><h3 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h3><p>è¦å®ç° CIï¼Œé¦–å…ˆå¾—æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œæœ¬æ–‡ä½¿ç”¨çš„é¡¹ç›®ï¼š<a target="_blank" rel="noopener" href="https://github.com/gongsir0630/wx-java-miniapp">gongsir0630/wx-java-miniapp</a></p>
<p>é¡¹ç›®åŸºäº Spring-Boot æ­å»ºï¼Œå¯ä»¥é€šè¿‡ Maven æ‰“åŒ…è¿è¡Œã€‚</p>
<p>è¿™é‡Œæˆ‘å¸Œæœ›æ¯æ¬¡æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“åï¼Œtravis ä¼šè‡ªåŠ¨ç¼–è¯‘æ‰“åŒ…é¡¹ç›®ï¼Œå¹¶ä¸Šä¼ åˆ°æˆ‘çš„æœåŠ¡å™¨ï¼Œæ‰§è¡Œéƒ¨ç½²è„šæœ¬ï¼Œä»¥å®ç°é¡¹ç›®è‡ªåŠ¨éƒ¨ç½²ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¿®æ”¹ä»£ç </li>
<li>git æäº¤åˆ°è¿œç¨‹ä»“åº“</li>
<li>travis æ£€æµ‹ä»“åº“å˜åŠ¨ï¼Œæ‰§è¡Œ <code>.travis.yml</code> ä¸­çš„ä»»åŠ¡</li>
<li>maven ç¼–è¯‘æ‰“åŒ…</li>
<li>ä¸Šä¼  jar åˆ°æˆ‘çš„äº‘æœåŠ¡å™¨</li>
<li>è¿œç¨‹æ‰§è¡Œéƒ¨ç½²è„šæœ¬</li>
<li>é‚®ä»¶é€šçŸ¥</li>
</ul>
<h3 id="GitHub-æˆæƒ"><a href="#GitHub-æˆæƒ" class="headerlink" title="GitHub æˆæƒ"></a>GitHub æˆæƒ</h3><p>è¿›å…¥<a target="_blank" rel="noopener" href="https://www.travis-ci.com/">Travis å®˜ç½‘</a>ï¼Œç›´æ¥ä½¿ç”¨ Github è´¦å·ç™»å½•ï¼Œç™»å…¥æˆåŠŸä¹‹åï¼Œæ ¹æ®é¡µé¢å¼•å¯¼å¼€é€š GitHub ä»“åº“è®¿é—®æˆæƒï¼Œåœ¨ <a target="_blank" rel="noopener" href="https://www.travis-ci.com/dashboard">Dashboard</a> å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„æˆæƒä»“åº“ï¼Œå¯ä»¥ç»™å¸¸ç”¨ä»“åº“åŠ æ˜Ÿæ ‡æ–¹ä¾¿è®¿é—®ï¼š</p>
<p><img src= "/blog/img/loading.gif" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4fbd78b8d99414b8ba448eb0cd5973a~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<blockquote>
<p>æ³¨æ„ Travis ç›®å‰æœ‰ä¸¤ä¸ªå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://www.travis-ci.com/">travis-ci.com</a> å’Œ <a target="_blank" rel="noopener" href="https://www.travis-ci.org/">travis-ci.org</a>. å®˜æ–¹é€šçŸ¥åè€…å³å°†å…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å‰è€…ã€‚</p>
</blockquote>
<h3 id="å¼€å¯é¡¹ç›®ç›‘æ§"><a href="#å¼€å¯é¡¹ç›®ç›‘æ§" class="headerlink" title="å¼€å¯é¡¹ç›®ç›‘æ§"></a>å¼€å¯é¡¹ç›®ç›‘æ§</h3><p>åœ¨ <a target="_blank" rel="noopener" href="https://www.travis-ci.com/dashboard">Dashboard</a> é¡µé¢é€‰æ‹©æƒ³è¦å¼€å¯ travis åŠŸèƒ½çš„ä»“åº“ï¼Œç‚¹å‡»<code>Trigger a build</code>å³å¯å¼€å¯å¯¹è¯¥ä»“åº“çš„ç›‘å¬ï¼Œtravis ä¸€æ—¦ç›‘å¬åˆ°ä»“åº“å˜åŠ¨ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘æ„å»ºä»»åŠ¡ï¼š</p>
<p><img src= "/blog/img/loading.gif" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73aebcdc54dc4238aa9923452bd60101~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h3 id="travis-é…ç½®æ–‡ä»¶"><a href="#travis-é…ç½®æ–‡ä»¶" class="headerlink" title="travis é…ç½®æ–‡ä»¶"></a>travis é…ç½®æ–‡ä»¶</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ <code>.travis.yml</code>æ–‡ä»¶ï¼Œè¿™é‡Œé—®é¢˜æ¯”è¾ƒå¤šï¼Œå…ˆä¸ŠæˆåŠŸæ¡ˆä¾‹ä»£ç ï¼Œå†æ…¢æ…¢è§£é‡Šï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">java</span></span><br><span class="line"><span class="attr">os:</span> <span class="string">linux</span></span><br><span class="line"><span class="attr">dist:</span> <span class="string">xenial</span></span><br><span class="line"><span class="attr">jdk:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">openjdk8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">addons:</span></span><br><span class="line">  <span class="attr">ssh_known_hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">39.106</span><span class="number">.230</span><span class="number">.88</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span> <span class="string">mvn</span> <span class="string">clean</span> <span class="string">package</span> <span class="string">-Dmaven.test.skip=true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">scp</span> <span class="string">-o</span> <span class="string">stricthostkeychecking=no</span> <span class="string">-r</span> <span class="string">target/wx-java-miniapp-0.0.1-SNAPSHOT.jar</span> <span class="string">travis@yzhelp.top:/www/wwwroot/travis-app/wx-java-miniapp</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ssh</span> <span class="string">travis@yzhelp.top</span> <span class="string">-o</span> <span class="string">stricthostkeychecking=no</span> <span class="string">&quot;sh /www/wwwroot/travis-app/wx-java-miniapp/restart.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">notifications:</span></span><br><span class="line">  <span class="attr">email:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">gongsir0630@gmail.com</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_f217180e22ee_key</span> <span class="string">-iv</span> <span class="string">$encrypted_f217180e22ee_iv</span></span><br><span class="line">  <span class="string">-in</span> <span class="string">id_rsa.enc</span> <span class="string">-out</span> <span class="string">~/.ssh/id_rsa</span> <span class="string">-d</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">echo</span> <span class="string">-e</span> <span class="string">&quot;Host yzhelp.top\n\tStrictHostKeyChecking no\n&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">~/.ssh/config</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>é…ç½®æ€è·¯ï¼š</p>
<ol>
<li>ç›‘æµ‹<code>main</code>åˆ†æ”¯å˜åŠ¨ï¼Œè§¦å‘æ„å»ºï¼›</li>
<li>é…ç½® ssh å…å¯†ç™»å½•è‡ªå·±çš„äº‘æœåŠ¡å™¨ï¼›</li>
<li>maven é¡¹ç›®æ‰“åŒ…ï¼›</li>
<li>scp ä¸Šä¼  jar æ–‡ä»¶åˆ°è¿è´¹æœåŠ¡å™¨ï¼ˆå…å¯†æ“ä½œï¼‰ï¼›</li>
<li>ssh è¿œç¨‹æ‰§è¡Œ<code>restart.sh</code>éƒ¨ç½²è„šæœ¬ã€‚</li>
</ol>
<blockquote>
<p><strong>æ³¨æ„</strong> æœ¬æ–‡ä¸ä»‹ç» travis æ–‡ä»¶ç¼–å†™æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å­¦ä¹ ï¼Œå»ºè®®åŒå­¦åˆ°å®˜ç½‘å…ˆäº†è§£ä¸€ä¸‹ç›¸å…³é…ç½®å’Œæ‰§è¡Œå‘¨æœŸã€‚</p>
</blockquote>
<h4 id="é…ç½®-ssh-å…å¯†ç™»å½•"><a href="#é…ç½®-ssh-å…å¯†ç™»å½•" class="headerlink" title="é…ç½® ssh å…å¯†ç™»å½•"></a>é…ç½® ssh å…å¯†ç™»å½•</h4><p>åœ¨ travis æ„å»ºä»»åŠ¡ä¸­ä¸èƒ½è¿›è¡Œå‘½ä»¤äº¤äº’ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ssh å‘½ä»¤å…å¯†ç™»å½•è‡ªå·±çš„æœåŠ¡å™¨ï¼Œè¿™å°±éœ€è¦å…ˆç”Ÿæˆå¯†é’¥å¯¹ï¼Œåœ¨æœ¬åœ°ç”Ÿæˆç§˜é’¥å¯¹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¼šåœ¨<code>~/.ssh/</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p>å°†å…¬é’¥<code> id_rsa.pub</code>ä½¿ç”¨<code>ssh-copy-id</code>æ·»åŠ åˆ°æœåŠ¡å™¨çš„å—ä¿¡åˆ—è¡¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i id_rsa.pub root@hostname</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹æœ¬åœ°<code>~/.ssh/config</code>æ–‡ä»¶ï¼Œè¿½åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># è¿œç¨‹ä¸»æœºåç§°</span><br><span class="line"><span class="title class_">Host</span> yzhelp.<span class="property">top</span></span><br><span class="line"># è¿œç¨‹ä¸»æœºåŸŸåæˆ–è€… ip åœ°å€</span><br><span class="line"><span class="title class_">HostName</span> yzhelp.<span class="property">top</span></span><br><span class="line"># è®¤è¯æ–¹å¼</span><br><span class="line"><span class="title class_">PreferredAuthentications</span> publickey</span><br><span class="line"># ç§é’¥ä½ç½®</span><br><span class="line"><span class="title class_">IdentityFile</span> /<span class="title class_">Users</span>/gongsir/.<span class="property">ssh</span>/id_rsa_yzhelp</span><br><span class="line"># ç”¨æˆ·å</span><br><span class="line"><span class="title class_">User</span> root</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong> å¦‚æœä½ æœ¬æœºåªæœ‰ä¸€å¯¹ç§˜é’¥å¯¹ï¼Œå¯ä»¥ä¸ç”¨ä¸Šè¿°é…ç½®ï¼Œå¦‚æœæœ‰å¤šå¯¹ç§˜é’¥å¯¹ï¼Œå¿…é¡»è¿›è¡Œä¸Šè¿°é…ç½®ï¼Œå¦åˆ™ç™»å½•æ—¶ç§˜é’¥ä¸ä¼šé…å¯¹ã€‚</p>
</blockquote>
<p>æµ‹è¯•å…å¯†ç™»å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@hostname</span><br></pre></td></tr></table></figure>
<p>è¿™åªæ˜¯æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘å¯ä»¥å…å¯†ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® travis çš„æœåŠ¡å™¨å¯ä»¥å…å¯†ç™»å½•åˆ°æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨ï¼Œå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬æœ¬åœ°çš„ç§é’¥<code>id_rsa</code>å¤åˆ¶ä¸€ä»½ç»™ travis çš„æœåŠ¡å™¨å°±å¯ä»¥äº†ã€‚</p>
<p>ä½†æ˜¯ç›´æ¥æŠŠç§é’¥å…¬å¸ƒå‡ºå»å¤ªå±é™©äº†ï¼Œtravis ç»™æˆ‘ä»¬æä¾›äº†è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>åœ¨æœ¬åœ°ä½¿ç”¨<code>travis-cli</code>å·¥å…·å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆ<code>*.enc</code>æ–‡ä»¶</li>
<li>å°†è§£å¯†ä¸²å†™å…¥ travis ç½‘ç«™çš„ç¯å¢ƒå˜é‡ä¸­</li>
<li>æ‰§è¡Œæ„å»ºä»»åŠ¡æ—¶ï¼Œä½¿ç”¨è§£å¯†ä¸²å¯¹åŠ å¯†æ–‡ä»¶è¿›è¡Œè§£å¯†å³å¯å¾—åˆ°åŸæ–‡ä»¶</li>
</ul>
<h4 id="æ–‡ä»¶åŠ å¯†"><a href="#æ–‡ä»¶åŠ å¯†" class="headerlink" title="æ–‡ä»¶åŠ å¯†"></a>æ–‡ä»¶åŠ å¯†</h4><p>ä¸å¤šè¯´ï¼Œå®˜ç½‘æœ‰è¯¦ç»†æ–‡æ¡£ï¼Œç›´æ¥ä¸Šæ­¥éª¤ã€‚</p>
<p>æœ¬åœ°å®‰è£…<code>travis-cli</code>å·¥å…·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install travis</span><br></pre></td></tr></table></figure>
<p>ç™»å½• travisï¼Œè¿™é‡Œå‘å°±æ¯”è¾ƒå¤šäº†ï¼š</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æç¤ºä¿¡æ¯</th>
<th>çŠ¶æ€</th>
</tr>
</thead>
<tbody><tr>
<td><code>travis login --auto</code></td>
<td>æç¤ºè¾“å…¥ GitHub çš„è´¦å·å¯†ç ï¼Œç™»å½•å¤±è´¥</td>
<td>âŒ Not Found</td>
</tr>
<tr>
<td><code>travis login --github-token token</code></td>
<td>ç™»å½•æˆåŠŸï¼Œä½†æ˜¯åç»­æ“ä½œä¼šæç¤º token å¤±æ•ˆ</td>
<td>âœ… å¯ä»¥ç™»å½•ï¼Œä½†æ˜¯æ–‡ä»¶åŠ å¯†ä¼šæç¤º token æ— æ•ˆ</td>
</tr>
<tr>
<td><code>travis login --github-token token --pro</code></td>
<td>ç™»å½•æˆåŠŸ</td>
<td>âœ… ç™»é™†æˆåŠŸ</td>
</tr>
</tbody></table>
<p>è¿™ä¸ªç¯èŠ‚æŠ˜è…¾äº†å¤§æŠŠæ—¶é—´ï¼Œç½‘ä¸Šä¹Ÿæ²¡æ‰¾åˆ°å…·ä½“è§£å†³æ–¹æ³•ï¼Œè¿™é‡Œè¯´ä¸‹æµç¨‹ï¼š</p>
<ul>
<li><code>travis-cli</code> é»˜è®¤ç™»å½•çš„æ˜¯ <a target="_blank" rel="noopener" href="https://api.travis-ci.org/">ttps://api.travis-ci.org/</a></li>
<li>è€Œæˆ‘ä»¬æˆæƒçš„æ˜¯ <a target="_blank" rel="noopener" href="https://api.travis-ci.com/">ttps://api.travis-ci.com/</a></li>
<li>å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç¬¬ä¸‰ç§ç™»å½•æ–¹å¼ï¼Œå³åŠ ä¸Š <code>--pro</code> é€‰é¡¹ï¼Œæ­¤æ—¶æ‰€æœ‰è¯·æ±‚éƒ½å‘å‘ <a target="_blank" rel="noopener" href="https://api.travis-ci.com/">ttps://api.travis-ci.com/</a></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æœ¬åœ°çš„ <code>~/.travis/config</code> ç¡®è®¤apiï¼š</p>
<p><img src= "/blog/img/loading.gif" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0c0d58d19d1446cb7a5df86143289db~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>ç™»é™†æˆåŠŸä¹‹åï¼Œå¯¹<code>id_rsa</code>è¿›è¡ŒåŠ å¯†ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­¤å¤„çš„--addå‚æ•°è¡¨ç¤ºè‡ªåŠ¨æ·»åŠ è„šæœ¬åˆ°.travis.ymlæ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment"># è¿™é‡Œä¹Ÿéœ€è¦åŠ ä¸Š --pro é€‰é¡¹</span></span><br><span class="line">travis encrypt-file ~/.ssh/id_rsa --add --pro</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤ï¼Œä¼šäº§ç”Ÿçš„ç»“æœï¼š</p>
<ul>
<li><p>æœ¬åœ°æ–°å¢<code>id_rsa.enc</code>ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ä¾› travis ä½¿ç”¨</p>
</li>
<li><p><code>.travis.yml</code>æ–‡ä»¶ä¸­ä¼šå¢åŠ ç±»ä¼¼å†…å®¹ï¼š</p>
  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_f217180e22ee_key</span> <span class="string">-iv</span> <span class="string">$encrypted_f217180e22ee_iv</span></span><br><span class="line">  <span class="string">-in</span> <span class="string">id_rsa.enc</span> <span class="string">-out</span> <span class="string">id_rsa</span> <span class="string">-d</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>-in</code> è¡¨ç¤ºè¾“å…¥æ–‡ä»¶ï¼Œå³æˆ‘ä»¬è¦è§£å¯†çš„æ–‡ä»¶</li>
<li><code>-out</code> è¡¨ç¤ºè§£å¯†åçš„æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†è·¯å¾„ä¿®æ”¹ä¸º <code>~/.ssh/id_rsa</code></li>
</ul>
</li>
<li><p>travis ä»“åº“ä¸­ä¼šæ–°å¢ä¸¤ä¸ªç¯å¢ƒå˜é‡</p>
<p>  <img src= "/blog/img/loading.gif" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b52ad2fd858454a8d3b17792015ac78~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
</li>
</ul>
<p>ç»è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œtravis æœåŠ¡å™¨æˆåŠŸè·å–åˆ°æˆ‘ä»¬çš„ç§˜é’¥æ–‡ä»¶<code>id_rsa</code>ï¼Œä¸ºäº†ä¿è¯åé¢èƒ½æˆåŠŸæ‰§è¡Œ ssh å…å¯†ç™»å½•ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦é…ç½®ä¸€ä¸‹æƒé™å’Œä¸»æœºè®¤è¯ä½¿ç”¨çš„ç§˜é’¥æ–‡ä»¶ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">addons:</span></span><br><span class="line">  <span class="attr">ssh_known_hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">è¿™é‡Œå†™è‡ªå·±çš„æœåŠ¡å™¨çš„åŸŸåæˆ–</span> <span class="string">ip</span> <span class="string">åœ°å€</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">openssl</span> <span class="string">aes-256-cbc</span> <span class="string">-K</span> <span class="string">$encrypted_f217180e22ee_key</span> <span class="string">-iv</span> <span class="string">$encrypted_f217180e22ee_iv</span></span><br><span class="line">  <span class="string">-in</span> <span class="string">id_rsa.enc</span> <span class="string">-out</span> <span class="string">~/.ssh/id_rsa</span> <span class="string">-d</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">echo</span> <span class="string">-e</span> <span class="string">&quot;Host è‡ªå·±çš„æœåŠ¡å™¨åŸŸåæˆ– ip åœ°å€\n\tStrictHostKeyChecking no\n&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">~/.ssh/config</span></span><br></pre></td></tr></table></figure>

<h4 id="é¡¹ç›®æ‰“åŒ…"><a href="#é¡¹ç›®æ‰“åŒ…" class="headerlink" title="é¡¹ç›®æ‰“åŒ…"></a>é¡¹ç›®æ‰“åŒ…</h4><p>é…ç½® <code>script</code> å³å¯ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">script:</span> <span class="string">mvn</span> <span class="string">clean</span> <span class="string">package</span> <span class="string">-Dmaven.test.skip=true</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸Šä¼ éƒ¨ç½²"><a href="#ä¸Šä¼ éƒ¨ç½²" class="headerlink" title="ä¸Šä¼ éƒ¨ç½²"></a>ä¸Šä¼ éƒ¨ç½²</h4><p>ä½¿ç”¨ scp å‘½ä»¤ä¸Šä¼  jar æ–‡ä»¶åˆ°æœåŠ¡å™¨æŒ‡å®šç›®å½•ï¼ˆé¢„å…ˆåˆ›å»ºï¼‰ï¼Œå¹¶æ‰§è¡Œéƒ¨ç½²è„šæœ¬ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">after_success:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">scp</span> <span class="string">-o</span> <span class="string">stricthostkeychecking=no</span> <span class="string">-r</span> <span class="string">target/wx-java-miniapp-0.0.1-SNAPSHOT.jar</span> <span class="string">travis@yzhelp.top:/www/wwwroot/travis-app/wx-java-miniapp</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">ssh</span> <span class="string">travis@yzhelp.top</span> <span class="string">-o</span> <span class="string">stricthostkeychecking=no</span> <span class="string">&quot;sh /www/wwwroot/travis-app/wx-java-miniapp/restart.sh&quot;</span></span><br></pre></td></tr></table></figure>

<p>éƒ¨ç½²è„šæœ¬ï¼ˆæä¾›å‚è€ƒï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line">jarName=/www/wwwroot/travis-app/wx-java-miniapp/wx-java-miniapp-0.0.1-SNAPSHOT</span><br><span class="line"></span><br><span class="line">ps -ef|grep <span class="variable">$&#123;jarName&#125;</span>.jar|grep -v grep|awk <span class="string">&#x27;&#123;print &quot;kill -9 &quot;$2&#125;&#x27;</span>|sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;stop sucess&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">nohup</span> java -jar <span class="variable">$&#123;jarName&#125;</span>.jar &gt; <span class="variable">$&#123;jarName&#125;</span>.<span class="built_in">log</span> 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;jarName&#125;</span>.jar deploy sucess&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong> è¿™é‡Œè¯´ä¸€ä¸‹ï¼Œéƒ¨ç½²è„šæœ¬ä¸­åŒ…å« <code>nohup</code> å‘½ä»¤ï¼Œä¸€å®šè¦åœ¨è„šæœ¬ç¬¬ä¸€è¡Œå£°æ˜ <code>source /etc/profile</code>ï¼Œå¦åˆ™ ssh è·å–ä¸åˆ°ç¯å¢ƒå˜é‡ï¼Œå¯¼è‡´éƒ¨ç½²å¤±è´¥ã€‚</p>
</blockquote>
<h4 id="é‚®ä»¶é€šçŸ¥"><a href="#é‚®ä»¶é€šçŸ¥" class="headerlink" title="é‚®ä»¶é€šçŸ¥"></a>é‚®ä»¶é€šçŸ¥</h4><p>travis æ„å»ºå®Œæˆä¹‹åï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½ä¼šé‚®ä»¶é€šçŸ¥ä½ ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">notifications:</span></span><br><span class="line">  <span class="attr">email:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">gongsir0630@gmail.com</span></span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>æäº¤ travis è§„åˆ™åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿›å…¥ travis å®˜ç½‘å³å¯çœ‹åˆ°æ„å»ºæ—¥å¿—ï¼š</p>
<p><img src= "/blog/img/loading.gif" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b710401a479b42e4813cfd53cf0499f9~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>ç‚¹å‡»é¡¶éƒ¨çš„å¾½ç« è¿˜å¯ä»¥å¤åˆ¶ md æ ¼å¼æ·»åŠ åˆ°ä½ çš„ readme æ–‡ä»¶ä¸­ï¼š</p>
<p><img src= "/blog/img/loading.gif" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd6ab71c767344bebfdf9aa0cae6e78a~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="æ€»ç»“-amp-ç›¸å…³é“¾æ¥"><a href="#æ€»ç»“-amp-ç›¸å…³é“¾æ¥" class="headerlink" title="æ€»ç»“ &amp; ç›¸å…³é“¾æ¥"></a>æ€»ç»“ &amp; ç›¸å…³é“¾æ¥</h2><p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ Travis æ‰“é€  SpringBoot åº”ç”¨æŒç»­é›†æˆå’Œè‡ªåŠ¨éƒ¨ç½²çš„å…¨è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å’Œå¤§å®¶ä¸€èµ·åˆ†äº«å­¦ä¹ ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼Œè°¢è°¢ï¼</p>
<p>ç›¸å…³é“¾æ¥ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/gongsir0630/wx-java-miniapp">ç¤ºä¾‹é¡¹ç›® | wx-java-miniapp</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.travis-ci.com/">Travis å®˜ç½‘æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903808758185998">å‚è€ƒæ–‡ç« ï¼šç”¨ Travis CI æ‰“é€ å¤§å‰ç«¯æŒç»­é›†æˆå’Œè‡ªåŠ¨åŒ–éƒ¨ç½²</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903957215576078">å‚è€ƒæ–‡ç« ï¼šåˆ©ç”¨Travis CI+GitHubå®ç°æŒç»­é›†æˆå’Œè‡ªåŠ¨éƒ¨ç½²</a></li>
</ul>
</div>
        
  </div>

    <div class="post_tags">
      
        <i class="fas fa-tag"></i> <a href="/blog/tags/Travis-CI/" class="tag">Travis CI</a>
      
    </div>
    <div class="post-nav">
      
      
        <div class="post-nav-next post-nav-item">
            <a href="/blog/2021/03/26/shiro-jwt-demo.html" >åŸºäºShiro | JWTæ•´åˆWxJavaå®ç°å¾®ä¿¡å°ç¨‹åºç™»å½•<i class="fa fa-chevron-right"></i></a>
        </div>
      
    </div>
      



  <div id="valine"></div>
  <script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script>
  <script>
        new Valine({
          el: '#valine',
          appId: "7sd5RvAKvPf0dty5f4QfFL7R-gzGzoHsz",
          appKey: "gjLXJe9CumUibqTPtE6TmIQn",
          avatar: "robohash",
          lang: "",
          meta: 'nick,mail,link'.split(','),
          requiredFields: 'nick,mail'.split(','),
          placeholder: "è¯„è®ºè®°å¾—å¸¦ä¸Šé‚®ç®±,ä½ çš„ç•™è¨€æˆ‘ä¼šé©¬ä¸Šæ”¶åˆ°é‚®ç®±æé†’å“’",
          pageSize:'10',
          recordIP: 'false',
          serverURLs: "https://blog.gongsir.club",
          emojiCDN: "https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/",
          enableQQ: "true",
        });
  </script>
  

</article>

    
<a id="gotop" href="javascript:" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i></a>
    






    
<div id="bottom-outer">
    <div id="bottom-inner">
        Â© 2020 <i class="fa fa-heart" id="heart"></i> ç¨‹åºå‘˜Kyleâœ¨ 
        <br>
        Powered by 
        <a target="_blank" rel="noopener" href="http://hexo.io">hexo</a> | Theme is <a target="_blank" rel="noopener" href="https://github.com/a2396837/hexo-theme-blank/">blank</a>
        
          <div class="icp-info">
            
            <img  class="icp-icon" src="/img/icp.png">
            
          <a href="http://www.beian.miit.gov.cn/" target="_blank"> èœ€ICPå¤‡19016450å·</a>
        </div>
        
    </div>  
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/layui-src@2.5.5/dist/layui.min.js"></script>



  
    <script src="/blog/js/script.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
  

 

  <script src="/blog/js/local-search.js"></script>
<script type="text/javascript">      
  var search_path = "search.xml";
if (search_path.length == 0) {
  search_path = "search.xml";
}
var path = "/blog/" + search_path;
  searchFunc(path, 'local-search-input', 'local-search-result');
</script>
  


  <script>
    window.lazyLoadOptions = {
      elements_selector: 'img',
      threshold: 0
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script>   
  


  <script>
    var images = $('img').not('.nav-logo img').not('.card img').not($('a>img')).not('.reward-content img')
    images.each(function (i, o) {
      var lazyloadSrc = $(o).attr('data-src') ? $(o).attr('data-src') : $(o).attr('src')
      $(o).wrap(`<a href="${lazyloadSrc}" data-fancybox="group" data-caption="${$(o).attr('alt')}" class="fancybox"></a>`)
    })
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script>
  <script>
        $().fancybox({
      selector: '[data-fancybox]',
      loop: true,
      transitionEffect: 'slide',
      protect: true,
      buttons: ['slideShow', 'fullScreen', 'thumbs', 'close']
    })
  </script>   
  


  <script>
  if (!window.MathJax) {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]],
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
              const display = !!node.type.match(/; *mode=display/)
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
              const text = document.createTextNode('')
              node.parentNode.replaceChild(text, node)
              math.start = {node: text, delim: '', n: 0}
              math.end = {node: text, delim: '', n: 0}
              doc.math.push(math)
            }
          }, '']
        }
      }
    }
    
    var script = document.createElement('script')
    script.src = "https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"
    script.id = 'MathJax-script'
    script.async = true
    document.head.appendChild(script)
  } else {
    MathJax.startup.document.state(0)
    MathJax.texReset()
    MathJax.typeset()
  }
  </script>
  


  
<script>
if (document.getElementsByClassName('mermaid').length) {
    if (window.mermaidJsLoad) mermaid.init()
    else {
      $.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js", function () {
        window.mermaidJsLoad = true
        mermaid.initialize({
          theme: "default",
        })
      })
    }
  }
  </script>
  






  <script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script>
  


  <script src="https://cdn.jsdelivr.net/gh/a2396837/CDN@latest/js/firework.js"></script>
  


  
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script>
<script>
!function (e, t, a) {
  var initCopyCode = function(){
    var copyHtml = '';
    copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
    copyHtml += '  <i class="fa fa-clipboard"></i><span>å¤åˆ¶</span>';
    copyHtml += '</button>';
    $(".highlight .code pre").before(copyHtml);
    new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
  }
  initCopyCode();
}(window, document);
</script>  
  

<script>
  var btntop = $('#gotop');
  btntop.on('click', function (e) {
    e.preventDefault();
    $('html, body').animate({ scrollTop: 0 }, '300');
  });

  var $table = $('.content table').not($('figure.highlight > table'))
$table.each(function () {
  $(this).wrap('<div class="table-wrap"></div>')
})
</script>



</html>